# 45ìž¥. í”„ë¡œë¯¸ìŠ¤

## ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½œë°± íŒ¨í„´ì˜ ë‹¨ì 

### ì½œë°± í—¬

```jsx
// GET ìš”ì²­ì„ ìœ„í•œ ë¹„ë™ê¸° í•¨ìˆ˜
const get = (url) => {
  const xhr = new XMLHttpRequest();
  xhr.open("GET", url);
  xhr.send();

  xhr.onload = () => {
    if (xhr.status === 200) {
      // ì„œë²„ì˜ ì‘ë‹µì„ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.
      console.log(JSON.parse(xhr.response));
    } else {
      console.error(`${xhr.status} ${xhr.statusText}`);
    }
  };
};

// idê°€ 1ì¸ postë¥¼ ì·¨ë“
get("https://jsonplaceholder.typicode.com/posts/1");
/*
{
  "userId": 1,
  "id": 1,
  "title": "sunt aut facere ...",
  "body": "quia et suscipit ..."
}
*/
```

- ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œê°€ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ í•´ë„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ì¢…ë£Œëœë‹¤.
  - ì¦‰, ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œëŠ” **ë¹„ë™ê¸° í•¨ìˆ˜ê°€ ì¢…ë£Œëœ ì´í›„**ì— ì™„ë£Œëœë‹¤
- ë”°ë¼ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¹„ë™ê¸°ë¡œ ë™ìž‘í•˜ëŠ” ì½”ë“œì—ì„œ **1. ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì™¸ë¶€ë¡œ ë°˜í™˜**í•˜ê±°ë‚˜ **2. ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹**í•˜ë©´ ê¸°ëŒ€í•œ ëŒ€ë¡œ ë™ìž‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

- GET ìš”ì²­ì„ ì „ì†¡í•˜ê³  ì„œë²„ì˜ ì‘ë‹µì„ ì „ë‹¬ë°›ëŠ” `**get`ë„ ë¹„ë™ê¸° í•¨ìˆ˜\*\*ì´ë‹¤.
  - `get` í•¨ìˆ˜ ë‚´ë¶€ì˜ `**onload` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë¹„ë™ê¸°ë¡œ ë™ìž‘\*\*í•˜ê¸° ë•Œë¬¸ì´ë‹¤

```jsx
// GET ìš”ì²­ì„ ìœ„í•œ ë¹„ë™ê¸° í•¨ìˆ˜
const get = (url) => {
  const xhr = new XMLHttpRequest();
  xhr.open("GET", url);
  xhr.send();

  xhr.onload = () => {
    if (xhr.status === 200) {
      // â‘  ì„œë²„ì˜ ì‘ë‹µì„ ë°˜í™˜í•œë‹¤.
      return JSON.parse(xhr.response);
    }
    console.error(`${xhr.status} ${xhr.statusText}`);
  };
};

// â‘¡ idê°€ 1ì¸ postë¥¼ ì·¨ë“
const response = get("https://jsonplaceholder.typicode.com/posts/1");
console.log(response); // undefined
```

- `console.log(response)`ê°€ `undefined`ê°€ ë‚˜ì˜¤ëŠ” ì´ìœ ?
  - get í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ XMLHttpRequest ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , HTTP ìš”ì²­ì„ ì´ˆê¸°í™”í•˜ê³ , HTTP ìš”ì²­ì„ ì „ì†¡í•œë‹¤. ê·¸ë¦¬ê³  `xhr.onload` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë°”ì¸ë”©í•˜ê³  ì¢…ë£Œí•œë‹¤.
  - ì´ ë•Œ get í•¨ìˆ˜ì— ëª…ì‹œì ì¸ ë°˜í™˜ë¬¸ì´ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.
    - `xhr.onload` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— ë°”ì¸ë”©í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ë°˜í™˜ë¬¸(â‘ )ì€ get í•¨ìˆ˜ì˜ ë°˜í™˜ë¬¸ì´ ì•„ë‹ˆë‹¤.
    - onload ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” get í•¨ìˆ˜ê°€ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤.

```jsx
let todos;

// GET ìš”ì²­ì„ ìœ„í•œ ë¹„ë™ê¸° í•¨ìˆ˜
const get = (url) => {
  const xhr = new XMLHttpRequest();
  xhr.open("GET", url);
  xhr.send();

  xhr.onload = () => {
    if (xhr.status === 200) {
      // â‘  ì„œë²„ì˜ ì‘ë‹µì„ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹í•œë‹¤.
      todos = JSON.parse(xhr.response);
    } else {
      console.error(`${xhr.status} ${xhr.statusText}`);
    }
  };
};

// idê°€ 1ì¸ postë¥¼ ì·¨ë“
get("https://jsonplaceholder.typicode.com/posts/1");
console.log(todos); // â‘¡ undefined
```

- ìƒìœ„ ìŠ¤ì½”í”„ì˜ todosì— í• ë‹¹í–ˆì„ ê²½ìš° `undefined`ê°€ ë‚˜ì˜¨ ì´ìœ ?
  - xhr.onload ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— ë°”ì¸ë”©í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì–¸ì œë‚˜ â‘¡ì˜ console.logê°€ ì¢…ë£Œí•œ ì´í›„ì— í˜¸ì¶œëœë‹¤.
  - ì¦‰, â‘¡ì˜ ì‹œì ì—ì„œëŠ” ì•„ì§ ì „ì—­ ë³€ìˆ˜ todosì— ì„œë²„ì— ì‘ë‹µ ê²°ê³¼ê°€ í• ë‹¹ë˜ê¸° ì´ì „ì´ë‹¤.

---

**â­ï¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ê´€ì **

1. ë¹„ë™ê¸° í•¨ìˆ˜ getì´ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ì½”ë“œë¥¼ í‰ê°€í•˜ëŠ” ê³¼ì •ì—ì„œ get í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ(ì½œ ìŠ¤íƒ)ì— í‘¸ì‹œëœë‹¤.
2. í•¨ìˆ˜ ì½”ë“œ ì‹¤í–‰ ê³¼ì •ì—ì„œ `xhr.onload` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë°”ì¸ë”©ëœë‹¤
3. get í•¨ìˆ˜ê°€ ì¢…ë£Œí•˜ë©´ get í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì½œ ìŠ¤íƒì—ì„œ íŒë˜ê³ , ê³§ë°”ë¡œ â‘¡ì˜ `console.log`ê°€ í˜¸ì¶œëœë‹¤
4. ì´ë•Œ `console.log`ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ì–´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— í‘¸ì‹œëœë‹¤
5. ë§Œì•½ `console.log`ê°€ í˜¸ì¶œë˜ê¸° ì§ì „ì— `load` ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆë”ë¼ë„ `xhr.onload` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— ë°”ì¸ë”©í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì ˆëŒ€ `console.log`ë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

- **ì´ìœ  : `xhr.onload` í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— ë°”ì¸ë”©í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì¦‰ì‹œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. `xhr.onload` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” `load` ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì¼ë‹¨ íƒœìŠ¤íŠ¸ íì— ì €ìž¥ë˜ì–´ ëŒ€ê¸°í•˜ë‹¤ê°€, ì½œ ìŠ¤íƒì´ ë¹„ë©´ ì´ë²¤íŠ¸ ë£¨í”„ì— ì˜í•´ ì½œ ìŠ¤íƒìœ¼ë¡œ í‘¸ì‹œë˜ì–´ ì‹¤í–‰ëœë‹¤.**

---

> ðŸ’¡Â **ê²°ë¡ 
> ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì™¸ë¶€ì— ë°˜í™˜í•  ìˆ˜ ì—†ê³ , ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ì— í• ë‹¹í•  ìˆ˜ë„ ì—†ë‹¤.**

- ë”°ë¼ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì²˜ë¦¬ ê²°ê³¼(ì„œë²„ì˜ ì‘ë‹µ ë“±)ì— ëŒ€í•œ í›„ì† ì²˜ë¦¬ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.
- ì´ë•Œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì½œë°±í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.
  - í•˜ì§€ë§Œ ì´ëŸ¬í•œ ì½œë°± í•¨ìˆ˜ í˜¸ì¶œì´ ì¤‘ì²©ë˜ì–´ ë³µìž¡ë„ê°€ ë†’ì•„ì§€ëŠ” í˜„ìƒì„ **ì½œë°± í—¬**ì´ë¼ í•œë‹¤.

---

### ì—ëŸ¬ ì²˜ë¦¬ì˜ í•œê³„

```jsx
try {
  setTimeout(() => {
    throw new Error("Error!");
  }, 1000);
} catch (e) {
  // ì—ëŸ¬ë¥¼ ìºì¹˜í•˜ì§€ ëª»í•œë‹¤
  console.error("ìºì¹˜í•œ ì—ëŸ¬", e);
}
```

- try ì½”ë“œ ë¸”ë¡ ë‚´ì—ì„œ í˜¸ì¶œí•œ `setTimeout` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ê°€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ì§€ë§Œ, ì—ëŸ¬ê°€ ìºì¹˜ë˜ì§€ ì•ŠëŠ” ì´ìœ ?
  - `setTimeout` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ `setTimeout` í•¨ìˆ˜ëŠ” ì´ë¯¸ ì½œ ìŠ¤íƒì—ì„œ ì œê±°ëœ ìƒíƒœì´ê¸° ë•Œë¬¸ì´ë‹¤.
    - ì¦‰, `setTimeout` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²ƒì´ `setTimeout` í•¨ìˆ˜ê°€ ì•„ë‹ˆë‹¤.
    - `setTimeout` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ì˜ í˜¸ì¶œìžê°€ `setTimeout` í•¨ìˆ˜ë¼ë©´ ì½œ ìŠ¤íƒì˜ í˜„ìž¬ ì‹¤í–‰ ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì½œë°± í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì¼ ë•Œ í˜„ìž¬ ì‹¤í–‰ ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ í•˜ìœ„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ `setTimeout` í•¨ìˆ˜ì—¬ì•¼ í•œë‹¤.
    - ì—ëŸ¬ëŠ” í˜¸ì¶œìž ë°©í–¥ìœ¼ë¡œ ì „íŒŒëœë‹¤. í•˜ì§€ë§Œ `setTimeout` í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê²ƒì€ `setTimeout` í•¨ìˆ˜ê°€ ì•„ë‹ˆë‹¤.

## í”„ë¡œë¯¸ìŠ¤ì˜ ìƒì„±

- Promise ìƒì„±ìž í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìžì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë©´ í”„ë¡œë¯¸ìŠ¤(Promise ê°ì²´)ë¥¼ ìƒì„±í•œë‹¤.
- Promise ìƒì„±ìž í•¨ìˆ˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë° ì´ ì½œë°± í•¨ìˆ˜ëŠ” `resolve`ì™€ `reject` í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

```jsx
// í”„ë¡œë¯¸ìŠ¤ ìƒì„±
const promise = new Promise((resolve, reject) => {
  // Promise í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•œë‹¤.
  if (/* ë¹„ë™ê¸° ì²˜ë¦¬ ì„±ê³µ */) {
    resolve('result');
  } else { /* ë¹„ë™ê¸° ì²˜ë¦¬ ì‹¤íŒ¨ */
    reject('failure reason');
  }
});
```

- ë¹„ë™ê¸° ì²˜ë¦¬ ì„±ê³µì‹œ `resolve` í•¨ìˆ˜ í˜¸ì¶œ, ì‹¤íŒ¨ì‹œ `reject` í•¨ìˆ˜ í˜¸ì¶œ

```jsx
// ë¹„ë™ê¸° í•¨ìˆ˜ getì„ í”„ë¡œë¯¸ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ êµ¬í˜„

// GET ìš”ì²­ì„ ìœ„í•œ ë¹„ë™ê¸° í•¨ìˆ˜
const promiseGet = (url) => {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.open("GET", url);
    xhr.send();

    xhr.onload = () => {
      if (xhr.status === 200) {
        // ì„±ê³µì ìœ¼ë¡œ ì‘ë‹µì„ ì „ë‹¬ë°›ìœ¼ë©´ resolve í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
        resolve(JSON.parse(xhr.response));
      } else {
        // ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ reject í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
        reject(new Error(xhr.status));
      }
    };
  });
};

// promiseGet í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
promiseGet("https://jsonplaceholder.typicode.com/posts/1");
```

- í”„ë¡œë¯¸ìŠ¤ ìƒíƒœ ì •ë³´
  | í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœ ì •ë³´ | ì˜ë¯¸                                  | ìƒíƒœ ë³€ê²½ ì¡°ê±´                   |
  | -------------------- | ------------------------------------- | -------------------------------- |
  | pending              | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì•„ì§ ìˆ˜í–‰ë˜ì§€ ì•Šì€ ìƒíƒœ | í”„ë¡œë¯¸ìŠ¤ê°€ ìƒì„±ëœ ì§í›„ ê¸°ë³¸ ìƒíƒœ |
  | fulfilled            | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ (ì„±ê³µ)      | resolve í•¨ìˆ˜ í˜¸ì¶œ                |
  | rejected             | ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ (ì‹¤íŒ¨)      | reject í•¨ìˆ˜ í˜¸ì¶œ                 |
  - **í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœëŠ” `resolve` ë˜ëŠ” `reject` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒìœ¼ë¡œ ê²°ì •ëœë‹¤.**
  - fulfilled ë˜ëŠ” rejected ìƒíƒœë¥¼ settled ìƒíƒœë¼ í•œë‹¤
    - settledëŠ” **ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ**ë¥¼ ë§í•œë‹¤.
  - `[[PromiseStatus]]` : í”„ë¡œë¯¸ìŠ¤ ìƒíƒœ ì •ë³´ ( `pending`, `fulfilled`, `rejected` )
  - `[[PromiseValue]]` : `resolve`ì™€ `reject`ì˜ ì¸ìˆ˜(ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼)

> **ðŸ’¡Â í”„ë¡œë¯¸ìŠ¤ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœì™€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ë‹¤**

## í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ

- í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœê°€ ë³€í™”í•˜ë©´ ì´ì— ë”°ë¥¸ í›„ì† ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤.
  - fulfilled ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ ì²˜ë¦¬ ê²°ê³¼ë¡œ ë¬´ì–¸ê°€ë¥¼ í•´ì•¼ í•œë‹¤.
  - rejected ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ ì²˜ë¦¬ ê²°ê³¼ë¡œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤.
- ì´ë¥¼ ìœ„í•´ì„œ í”„ë¡œë¯¸ìŠ¤ëŠ” í›„ì† ë©”ì„œë“œ `then`, `catch`, `finally`ë¥¼ ì œê³µí•œë‹¤.
  - **ëª¨ë“  í›„ì† ë©”ì„œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜, ë¹„ë™ê¸°ë¡œ ë™ìž‘**
- **í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœê°€ ë³€í™”í•˜ë©´ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ì½œë°± í•¨ìˆ˜ê°€ ì„ íƒì ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.**

### Promise.prototype.then

- ì£¼ë¡œ ì„±ê³µ(resolve)í–ˆì„ ê²½ìš°

```jsx
// êµ¬ë¬¸
p.then(onFulfilled, onRejected);

p.then(
  function (value) {
    // ì´í–‰
  },
  function (reason) {
    // ê±°ë¶€
  }
);
```

- `onFulfilled` : ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì„±ê³µí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì„±ê³µ ì²˜ë¦¬ ì½œë°± í•¨ìˆ˜
- ~~`onRejected` : ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì‹¤íŒ¨í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì‹¤íŒ¨ ì²˜ë¦¬ ì½œë°± í•¨ìˆ˜~~
- then ë©”ì„œë“œëŠ” ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤ â‡’ í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ì´ ê°€ëŠ¥í•˜ë‹¤

### Promise.prototype.catch

- ì‹¤íŒ¨(rejected) í–ˆì„ ê²½ìš°

```jsx
// êµ¬ë¬¸
p.catch(onRejected);

p.catch(function (reason) {
  // rejection
});
```

- `onRejected` : ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì‹¤íŒ¨í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì‹¤íŒ¨ ì²˜ë¦¬ ì½œë°± í•¨ìˆ˜
- catch ë©”ì„œë“œëŠ” ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤ â‡’ í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ì´ ê°€ëŠ¥í•˜ë‹¤

### Promise.prototype.finally

- ì„±ê³µê³¼ ì‹¤íŒ¨ì— ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ í•œ ë²ˆ í˜¸ì¶œëœë‹¤.

```jsx
// êµ¬ë¬¸
promise.finally(onFinally);

promise.finally(() => {
  // Code that will run after promise is settled (fulfilled or rejected)
});
```

- í”„ë¡œë¯¸ìŠ¤ ìƒíƒœì™€ ìƒê´€ì—†ì´ ê³µí†µì ìœ¼ë¡œ ìˆ˜í–‰í•´ì•¼ í•  ì²˜ë¦¬ ë‚´ìš©ì´ ìžˆì„ ê²½ìš° ìœ ìš©

## í”„ë¡œë¯¸ìŠ¤ì˜ ì—ëŸ¬ ì²˜ë¦¬

- ì½œë°± íŒ¨í„´ì˜ ê²½ìš° ì—ëŸ¬ ì²˜ë¦¬ê°€ ê³¤ëž€í•˜ì§€ë§Œ í”„ë¡œë¯¸ìŠ¤ëŠ” ì—ëŸ¬ë¥¼ ë¬¸ì œì—†ì´ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.
- `then`ì˜ ë‘ë²ˆì§¸ ì¸ìžë¡œ ë„£ëŠ” ë°©ë²•ë„ ìžˆì§€ë§Œ ë³´í†µ `**catch` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤.\*\*

## í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹

- `then`, `catch`, `finally` í›„ì† ì²˜ë¦¬ ë©”ì„œë“œê°€ ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì—°ì†ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìžˆëŠ”ë° ì´ë¥¼ í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ì´ë¼ í•œë‹¤.
- í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì˜ ì½œë°±í•¨ìˆ˜ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ì„ íƒì ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.

```jsx
const url = "https://jsonplaceholder.typicode.com";

// idê°€ 1ì¸ postì˜ userIdë¥¼ ì·¨ë“
promiseGet(`${url}/posts/1`)
  // ì·¨ë“í•œ postì˜ userIdë¡œ user ì •ë³´ë¥¼ ì·¨ë“
  .then(({ userId }) => promiseGet(`${url}/users/${userId}`))
  .then((userInfo) => console.log(userInfo))
  .catch((err) => console.error(err));
```

- í”„ë¡œë¯¸ìŠ¤ë„ ì½œë°± íŒ¨í„´ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ê°€ë…ì„±ì´ ì¢‹ì§„ ì•Šë‹¤.

## í”„ë¡œë¯¸ìŠ¤ì˜ ì •ì  ë©”ì„œë“œ

### Promise.resolve / Promise.reject

> `Promise.resolve` / `Promise.reject`ëŠ” ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ê°’ì„ ëž˜í•‘í•˜ì—¬ í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤

```jsx
// ë°°ì—´ì„ resolveí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±
const resolvedPromise = Promise.resolve([1, 2, 3]);
resolvedPromise.then(console.log); // [1, 2, 3]

// ë‹¤ìŒê³¼ ê°™ì´ ë™ìž‘
const resolvedPromise = new Promise((resolve) => resolve([1, 2, 3]));
resolvedPromise.then(console.log); // [1, 2, 3]

// ì—ëŸ¬ ê°ì²´ë¥¼ rejectí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±
const rejectedPromise = Promise.reject(new Error("Error!"));
rejectedPromise.catch(console.log); // Error: Error!

// ë‹¤ìŒê³¼ ê°™ì´ ë™ìž‘
const rejectedPromise = new Promise((_, reject) => reject(new Error("Error!")));
rejectedPromise.catch(console.log); // Error: Error!
```

### Promise.all

> `Promise.all` ë©”ì„œë“œëŠ” ì—¬ëŸ¬ ê°œì˜ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ **ëª¨ë‘ ë³‘ë ¬ ì²˜ë¦¬**í•  ë•Œ ì‚¬ìš©í•œë‹¤.

```jsx
const requestData1 = () =>
  new Promise((resolve) => setTimeout(() => resolve(1), 3000));
const requestData2 = () =>
  new Promise((resolve) => setTimeout(() => resolve(2), 2000));
const requestData3 = () =>
  new Promise((resolve) => setTimeout(() => resolve(3), 1000));

// ì„¸ ê°œì˜ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬
const res = [];
requestData1()
  .then((data) => {
    res.push(data);
    return requestData2();
  })
  .then((data) => {
    res.push(data);
    return requestData3();
  })
  .then((data) => {
    res.push(data);
    console.log(res); // [1, 2, 3] â‡’ ì•½ 6ì´ˆ ì†Œìš”
  })
  .catch(console.error);

// Promise.all ì‚¬ìš©
Promise.all([requestData1(), requestData2(), requestData3()])
  .then(console.log) // [ 1, 2, 3 ] â‡’ ì•½ 3ì´ˆ ì†Œìš”
  .catch(console.error);
```

- í”„ë¡œë¯¸ìŠ¤ë¥¼ ìš”ì†Œë¡œ ê°–ëŠ” ë°°ì—´ ë“±ì˜ **ì´í„°ëŸ¬ë¸”**ì„ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.
  - ê·¸ë¦¬ê³  ì „ë‹¬ë°›ì€ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ê°€ **ëª¨ë‘ `fulFilled` ìƒíƒœê°€ ë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë¦¬ê³ **, ëª¨ë“  ì²˜ë¦¬ **ê²°ê³¼ë¥¼ ë°°ì—´ì— ì €ìž¥í•´ ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜**í•œë‹¤.
  - ì¦‰ **ì²˜ë¦¬ ìˆœì„œê°€ ë³´ìž¥**ì´ ëœë‹¤.

### Promise.race

> `Promise.race` ë©”ì„œë“œëŠ” **ê°€ìž¥ ë¨¼ì €** `fulfilled` ìƒíƒœê°€ ëœ í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ resolve í•˜ëŠ” **ìƒˆë¡œìš´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜**í•œë‹¤.

```jsx
Promise.race([
  new Promise((resolve) => setTimeout(() => resolve(1), 3000)), // 1
  new Promise((resolve) => setTimeout(() => resolve(2), 2000)), // 2
  new Promise((resolve) => setTimeout(() => resolve(3), 1000)), // 3
])
  .then(console.log) // 3
  .catch(console.log);
```

- í”„ë¡œë¯¸ìŠ¤ë¥¼ ìš”ì†Œë¡œ ê°–ëŠ” ë°°ì—´ ë“±ì˜ **ì´í„°ëŸ¬ë¸”**ì„ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ”ë‹¤.

### Promise.allSettled

> `Promise.allSettled` ë©”ì„œë“œëŠ” ì „ë‹¬ë°›ì€ í”„ë¡œë¯¸ìŠ¤ê°€ **ëª¨ë‘** `settled` ìƒíƒœê°€ ë˜ë©´ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°°ì—´ë¡œ ë°˜í™˜í•œë‹¤.

```jsx
Promise.allSettled([
  new Promise((resolve) => setTimeout(() => resolve(1), 2000)),
  new Promise((_, reject) =>
    setTimeout(() => reject(new Error("Error!")), 1000)
  ),
]).then(console.log);
/*
[
  {status: "fulfilled", value: 1},
  {status: "rejected", reason: Error: Error! at <anonymous>:3:54}
]
*/
```

- ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ë“¤ì˜ ì²˜ë¦¬ ê²°ê³¼ê°€ ëª¨ë‘ ë‹´ê²¨ ìžˆë‹¤

## ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ í

> ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì—ëŠ” í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œì˜ ì½œë°± í•¨ìˆ˜ê°€ ìž„ì‹œ ì €ìž¥ëœë‹¤.

- ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íëŠ” íƒœìŠ¤í¬ íë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤
  - ì¦‰ ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì½œ ìŠ¤íƒì´ ë¹„ë©´ ë¨¼ì € ë§ˆì´í¬ë¡œíƒœìŠ¤í¬ íì—ì„œ ëŒ€ê¸°í•˜ê³  ìžˆëŠ” í•¨ìˆ˜ë¥¼ ê°€ì ¸ì™€ ì‹¤í–‰í•œë‹¤

```jsx
setTimeout(() => console.log(1), 0);

Promise.resolve()
  .then(() => console.log(2))
  .then(() => console.log(3));
```

- ê·¸ëž˜ì„œ 2 â†’ 3 â†’ 1 ìˆœì„œë¡œ ì¶œë ¥ì´ ëœë‹¤

## fetch

> fetch í•¨ìˆ˜ëŠ” XMLHttpRequest ê°ì²´ì™€ ë§ˆì°¬ê°€ì§€ë¡œ HTTP ìš”ì²­ ì „ì†¡ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ Web APIë‹¤.

- XMLHttpRequest ê°ì²´ë³´ë‹¤ ì‚¬ìš©ë²•ì´ ê°„ë‹¨í•˜ê³  **í”„ë¡œë¯¸ìŠ¤ë¥¼ ì œê³µ**í•œë‹¤
  ```jsx
  const promise = fetch(url [, options])
  ```
- **fetch í•¨ìˆ˜ëŠ” HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” Response ê°ì²´ë¥¼ ëž˜í•‘í•œ Promise ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.**
  - ê·¸ëŸ¬ë¯€ë¡œ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ thenì„ í†µí•´ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ Response ê°ì²´ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìžˆë‹¤.
  ```jsx
  fetch("https://jsonplaceholder.typicode.com/todos/1").then((response) =>
    console.log(response)
  );
  ```
- **â—ï¸ ì£¼ì˜**
  - **fetch í•¨ìˆ˜ëŠ” `404 Not Found`ë‚˜ `500 Internal Server Error`ì™€ ê°™ì€ HTTP ì—ëŸ¬ê°€ ë°œìƒì„ í•´ë„ ì—ëŸ¬ë¥¼ rejectí•˜ì§€ ì•Šê³  ë¶ˆë¦¬ì–¸ íƒ€ìž…ì˜ ok ìƒíƒœë¥¼ falseë¡œ ì„¤ì •í•œ Response ê°ì²´ë¥¼ resolveí•œë‹¤.**
  - **ì˜¤í”„ë¼ì¸ ë“±ì˜ ë„¤íŠ¸ì›Œí¬ ìž¥ì• ë‚˜ CORS ì—ëŸ¬ì— ì˜í•´ ìš”ì²˜ìž‰ ì™„ë£Œë˜ì§€ ëª»í•œ ê²½ìš°ì—ë§Œ í”„ë¡œë¯¸ìŠ¤ë¥¼ reject í•œë‹¤**
  - **ë”°ë¼ì„œ fetch í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” fetch í•¨ìˆ˜ê°€ ë°˜í™˜í•œ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ë¶ˆë¦¬ì–¸ íƒ€ìž…ì˜ ok ìƒíƒœë¥¼ í™•ì¸í•´ ëª…ì‹œì ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•´ì•¼ í•œë‹¤.**
  ```jsx
  const wrongUrl = "https://jsonplaceholder.typicode.com/XXX/1";

  // ë¶€ì ì ˆí•œ URLì´ ì§€ì •ë˜ì—ˆê¸° ë•Œë¬¸ì— 404 Not Found ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
  fetch(wrongUrl)
    // responseëŠ” HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ëŠ” Response ê°ì²´ë‹¤.
    .then((response) => {
      if (!response.ok) throw new Error(response.statusText);
      return response.json();
    })
    .then((todo) => console.log(todo))
    .catch((err) => console.error(err));
  ```
  - ì´ë¥¼ ë³´ì™„í•œ ê²ƒì´ axios ì´ë‹¤

### fetch í•¨ìˆ˜ ì‹¤ìŠµ

- fetch í•¨ìˆ˜ë¥¼ í†µí•´ HTTP ìš”ì²­ì„ ì „ì†¡í•´ë³´ìž.

```jsx
const request = {
  get(url) {
    return fetch(url);
  },
  post(url, payload) {
    return fetch(url, {
      method: "POST",
      headers: { "content-Type": "application/json" },
      body: JSON.stringify(payload),
    });
  },
  patch(url, payload) {
    return fetch(url, {
      method: "PATCH",
      headers: { "content-Type": "application/json" },
      body: JSON.stringify(payload),
    });
  },
  delete(url) {
    return fetch(url, { method: "DELETE" });
  },
};
```

1. **GET ìš”ì²­**

```jsx
request
  .get("https://jsonplaceholder.typicode.com/todos/1")
  .then((response) => {
    if (!response.ok) throw new Error(response.statusText);
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((err) => console.error(err));
// {userId: 1, id: 1, title: "delectus aut autem", completed: false}
```

1. **POST ìš”ì²­**

```jsx
request
  .post("https://jsonplaceholder.typicode.com/todos", {
    userId: 1,
    title: "JavaScript",
    completed: false,
  })
  .then((response) => {
    if (!response.ok) throw new Error(response.statusText);
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((err) => console.error(err));
// {userId: 1, title: "JavaScript", completed: false, id: 201}
```

1. **PATCH ìš”ì²­**

```jsx
request
  .patch("https://jsonplaceholder.typicode.com/todos/1", {
    completed: true,
  })
  .then((response) => {
    if (!response.ok) throw new Error(response.statusText);
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((err) => console.error(err));
// {userId: 1, id: 1, title: "delectus aut autem", completed: true}
```

1. **DELETE ìš”ì²­**

```jsx
request
  .delete("https://jsonplaceholder.typicode.com/todos/1")
  .then((response) => {
    if (!response.ok) throw new Error(response.statusText);
    return response.json();
  })
  .then((todos) => console.log(todos))
  .catch((err) => console.error(err));
// {}
```

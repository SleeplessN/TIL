# 2022/10/19

## 프로젝트 8일차

### 배포 플랫폼 변경

[https://piece-plan.du.r.appspot.com/](https://piece-plan.du.r.appspot.com/)

- 기존에는 heroku라는 플랫폼에서 배포를 하였지만, 이는 서버가 미국에 있기 때문에 너무 느리다는 단점이 존재했다.
- 다음에는 github에서 배포를 하려하였지만, github에서는 server를 돌릴 수 없어서 실패하였다.
- 이 후, Netlify와 GCP에서 시도해본 결과 GCP에서 배포를 성공하였다.

### 작업 내용

- escape 관련 문제
    - **발견** : 회원가입을 할 때, 닉네임에 `<`, `>` 를 넣어서 가입하다보니 layout 구조가 무너지는 문제가 존재했다.
    - **원인** : 이는 로그인을 하고나면 우측 위에 회원가입 할 때 작성한 [닉네임]이 그대로 들어가는데 `<`, `>` 가 HTML 태그 작성시의 `<` ,`>` 로 인식하기 때문에 발생한 문제였다. 또한, 검색 창에서 검색 창의 value를 attribute로 작성을 하는데 `attribute=""` 내부에 `"` 가 사용될 시 HTML 태그 내부의 `"` 로 인식되는 문제도 존재하였다.
    - **해결** : 정규표현식을 사용하여 특수문자들을 &quot와 같은 escape 문자로 변경시켜주었다.
    - **알게된 내용** : 닉네임에 script에 관련한 내용들도 작성해보았는데, script에 대한 내용도 담기고 inline으로 작성된 이벤트들도 동작이 되는 것을 알게되었다. 지금과 같은 작업을 해주지 않으면 XSS 보안 문제에 직면할 수 있다는 것을 알게되었고, 왜 다른 사이트들이 특수문자들을 허용해주지 않는지도 깨닫게 되었다.
- escape 해결하면서 나온 문제
    - **발견** : 위 escape 문제를 해결하면서 닉네임에 특수문자를 포함시켜 회원가입을 할시에 회원가입이 정상적으로 되지 않는 문제가 존재했다.
    - **원인** : 예를 들어, `"` 는 `&quot`로 replace 시키는데 한글자가 5글자로 변경이 되면서 닉네임의 최대길이를 초과하면서 생기는 문제였다.
    - **해결** : 서버에서 데이터를 받을 때 `&quot`를 `"`로 해석하도록 만들어 주었다.

  

### 해야할 일

- 폴더 구조
- 발표 준비
- README용 gif 만들기
    1. 회원가입 (중복 및 성공)
    2. 로그인 (실패 및 회원가입한걸로)
    3. 전체 캘린더 
        1. 년도 달 바뀌는 것 (일정 등록 되어있는 아이디로)
        2. 모달 창 및 상세정보 보기 (편집 버튼 누르는것 까지)
    4. Plan
        1. 일정 추가/삭제 → 캘린더 돌아가기
        2. 검색 및 드래그 즐겨찾기 필터링

### 느낀점

- 어디 한 군데를 고치면 엉뚱한 곳에서 오류가 계속 발생하는 경우가 자주 발생했다. 이를 통해서 테스트를 기반으로 한 프로그래밍의 중요함을 알게되었다. 그리고 배포하는 과정에서도 도메인만 등록하면 바로 배포될 줄 알았지만 배포 자체도 그리 쉬운 작업이 아니란 것을 알게되었다. 조원들과 함께 프로젝트를 진행하고 아직 부족하지만 배포까지하니 뿌듯했다.
# 2022/10/11

## 오늘 공부한 내용

### JWT

- JWT(JSON Web Token)는 유저를 인증하고 식별하기 위한 토큰(Token)인증 기반이다.
- JSON Web Token은 점(`.`)으로 구분된 세 부분으로 구성된다.
    - `xxxxx.yyyyy.zzzzz`
    1. 헤더 (Header)
        - 헤더는 일반적으로 **JWT인 토큰 유형**과 HMAC SHA256 또는 RSA와 같은 **사용 중인 서명 알고리즘** 두 부분으로 구성된다.
        
        ```jsx
        {
          "alg": "HS256",
          "typ": "JWT"
        }
        ```
        
    2. 페이로드 (payload)
        - 사용자의 데이터 및 권한이 담긴 클레임이나 JSON 개체가 포함된다.
        
        ```jsx
        {
          "sub": "1234567890",
          "name": "John Doe",
          "admin": true
        }
        ```
        
        - 인코딩되는 것이지 암호화가 되는 것은 아니므로 민감한 정보를 담으면 안된다.
            - 단순히 식별을 하기 위한 정보만을 담아야 한다.
    3. 서명 (Signature)
        - 토큰을 인코딩하거나 유효성 검증을 할 때 사용하는 고유한 암호화 코드이다.
        - JSON 페이로드의 무결성을 확인하는 데 사용할 수 있는 암호화 알고리즘을 통해 생성된 문자열이다.

- 토큰을 localStorage vs cookie?
    - localStorage
        - 장점 : CSRF(Cross-0Site Request Fogery)에 안전하다.
        - 단점 : XSS(Cross-Site Scripting)에 취약하다.
    - cookie
        - 장점 : XSS로부터 localStorage에 비해 안전하다.(완전히 안전한 것은 아니다)
        - 단점 : CSRF 공격에 취약하다.
    - 결론
        - cookie는 별도로 헤더에 담지 않아도 요청을 보낼때 자동으로 담아서 보내지기 때문에 매번 서버로의 요청에 담아야하는 토큰이라는 성격과 잘 맞고, 코드도 더 간결해진다.
- 첫 로그인 시 서버에서 토큰을 주는데 이것을 어디에 보관할지?
    - 로컬스토리지에 저장시 요청을 보낼 때 헤더에 담아서 보낸다
    - 쿠키에 저장시 서버에 자동으로 보내진다.
- 우리는 서버만 토큰을 사용하도록 해야한다 (클라이언트는 접근할 수 없도록)

### Routing

- 페이지간 이동
- SPA에서는 #root 내용을 갈아끼우는 것
- MPA에서는 완전한 html을 다시 주는 것